<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Products | Grinita Digital Marketplace</title>
    <meta name="description" content="Browse the complete collection of Grinita's exclusive digital products, including premium coloring books, creative stickers, and design templates.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Playfair+Display:wght@700&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* كل أكواد CSS من ملفك الأصلي، مع إضافات وتصحيحات للتجاوب */
        :root {
            --primary: #D73F37; --secondary: #F7D54A; --dark: #212121;
            --light: #FDFDFD; --text: #333333; --text-light: #6C757D;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.07); --transition: all 0.3s ease-in-out;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; color: var(--text); line-height: 1.7; background-color: #f9f9f9; }
        body.rtl { font-family: 'Cairo', sans-serif; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; font-weight: 700; margin-bottom: 1rem; color: var(--dark); }
        body.rtl h1, body.rtl h2, body.rtl h3 { font-family: 'Cairo', sans-serif; }
        .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .btn { display: inline-block; padding: 14px 35px; background: var(--primary); color: white; border: none; border-radius: 50px; font-weight: 600; cursor: pointer; text-decoration: none; }
        
        /* --- Header Styles - Copied & Corrected for Mobile --- */
        header { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05); position: sticky; width: 100%; top: 0; z-index: 1000; }
        .header-container { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; position: relative; }
        .logo-centered { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); }
        .logo-image { height: 45px; border-radius: 50%; }
        .header-nav { flex: 1; }
        .header-nav.left nav, .header-nav.right nav { display: flex; }
        .header-nav.left nav { justify-content: flex-start; }
        .header-nav.right nav { justify-content: flex-end; }
        nav ul { display: flex; list-style: none; align-items: center; }
        nav ul li { margin: 0 15px; }
        nav ul li a, nav ul li button { text-decoration: none; color: var(--text); font-weight: 500; background: none; border: none; font-family: inherit; font-size: 1rem; cursor: pointer; }
        .lang-toggle { border: 1px solid #ddd; border-radius: 20px; padding: 6px 16px; }
        .mobile-menu-toggle { display: none; font-size: 1.8rem; cursor: pointer; color: var(--dark); z-index: 1003; }
        .mobile-nav { display: none; }

        /* --- Products Page Styles --- */
        .page-wrapper { padding-top: 120px; padding-bottom: 100px; }
        .intro-text { text-align: center; margin-bottom: 3rem; padding: 2.5rem; background: var(--light); border-radius: 20px; border: 1px solid #eee; }
        .intro-text h1 { font-size: 2.2rem; color: var(--primary); }
        .intro-text p { max-width: 800px; }
        .products-layout { display: grid; grid-template-columns: 280px 1fr; gap: 40px; }
        
        .filter-toggle-btn { display: none; }
        .filter-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1001; }
        .filters-sidebar { background: white; border-radius: 20px; padding: 30px; box-shadow: var(--shadow); align-self: start; position: sticky; top: 120px; }
        .sidebar-header { display: none; }
        .filter-group { margin-bottom: 2.5rem; }
        .filter-group h3 { font-size: 1.5rem; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary); }
        .filter-group input { margin-right: 10px; }
        
        .price-slider { margin-top: 1rem; }
        .price-values { display: flex; justify-content: space-between; font-weight: 600; color: var(--primary); }
        .slider-container { position: relative; height: 5px; background: #ddd; border-radius: 5px; }
        .slider-track { position: absolute; height: 100%; background: var(--primary); border-radius: 5px; }
        .range-slider { -webkit-appearance: none; appearance: none; width: 100%; background: transparent; position: absolute; top: -5px; pointer-events: none; }
        .range-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 15px; height: 15px; background: var(--primary); border-radius: 50%; cursor: pointer; pointer-events: auto; touch-action: none; }
        .range-slider::-moz-range-thumb {
    width: 15px;
    height: 15px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
    border: none; /* Some browsers add a border */
    touch-action: none; /* ✅ الإصلاح لفايرفوكس */}
        
        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .product-card { background: white; border-radius: 20px; box-shadow: var(--shadow); display: flex; flex-direction: column; overflow: hidden; }
        .product-img { height: 220px; position: relative; }
        .product-img-slider img { position: absolute; width: 100%; height: 100%; object-fit: contain; opacity: 0; transition: opacity 0.3s ease; }
        .product-img-slider img.active { opacity: 1; }
        .slider-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.4); color: white; border: none; border-radius: 50%; width: 35px; height: 35px; cursor: pointer; z-index: 2; }
        .slider-btn.prev { left: 10px; } .slider-btn.next { right: 10px; }
        .product-content { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; text-align: center; }
        .product-content h3 { font-size: 1.4rem; }
        .product-content p { flex-grow: 1; font-size: 0.95rem; }
        .product-meta { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .product-price { font-size: 1.6rem; font-weight: 700; color: var(--primary); }
        .product-rating .fas, .product-rating .fa-star-half-alt { color: var(--secondary); }
        
        .mini-blog-section { display: grid; grid-template-columns: 200px 1fr; gap: 2rem; align-items: center; background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); margin-top: 4rem; }
        .mini-blog-img { width: 100%; height: 200px; border-radius: 15px; object-fit: cover; }
        
        footer { /* Your original footer styles */ }
        
        /* --- CSS جديد ومصحح لتجاوب الهاتف --- */
        @media (max-width: 992px) {
            .desktop-nav { display: none; }
            .mobile-menu-toggle { display: block; }
            .logo-centered { position: static; transform: none; }
            .header-container { justify-content: space-between; }
            .mobile-nav { display: none; position: absolute; top: 100%; left: 0; width: 100%; background: white; flex-direction: column; padding: 20px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); }
            .mobile-nav.active { display: flex; }
            .mobile-nav ul { flex-direction: column; }
            .mobile-nav ul li { margin: 15px 0; text-align: center; }

            .products-layout { grid-template-columns: 1fr; }
            .filter-toggle-btn { display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 15px; background: var(--dark); color: white; border: none; border-radius: 15px; font-size: 1.1rem; font-weight: 600; cursor: pointer; margin-bottom: 2rem; }
            .filters-sidebar { position: fixed; top: 0; left: 0; width: 300px; height: 100%; z-index: 1002; transform: translateX(-100%); transition: transform 0.3s ease-in-out; border-radius: 0 20px 20px 0; overflow-y: auto; }
            .filters-sidebar.active { transform: translateX(0); }
            .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
            .close-filter-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; }
        }
        
        body.rtl { direction: rtl; text-align: right; }
        body.rtl .filter-group input { margin-right: 0; margin-left: 10px; }
        body.rtl .mobile-menu-toggle { right: auto; left: 20px; }

        /* ================================== */
/* ✅ أضف هذا الكود في نهاية قسم CSS */
/* ================================== */

.footer-logo-image {
    max-width: 180px; /* تحديد عرض أقصى للشعار */
    height: auto;     /* الحفاظ على الأبعاد تلقائيًا */
    margin-right: 12px;
    border-radius: 50%;
}

/* For RTL version */
body.rtl .footer-logo-image {
    margin-left: 12px;
    margin-right: 0;
}
    </style>
</head>
<body>
    <header id="header">
        <div class="container header-container">
            <a href="index.html" class="logo-mobile-link">
                <img src="images/grinita store stickers and coloring book and t shirt.png" alt="Grinita Logo" class="logo-image">
            </a>
            <div class="header-nav left desktop-nav"><nav><ul><li><a href="index.html" data-key="navHome">Home</a></li><li><a href="products.html" data-key="navAllProducts">All Products</a></li></ul></nav></div>
            <a href="index.html" class="logo-centered desktop-nav"><img src="images/grinita store stickers and coloring book and t shirt.png" alt="Grinita Logo" class="logo-image"></a>
            <div class="header-nav right desktop-nav"><nav><ul><li><a href="index.html#blog" data-key="navBlog">Blog</a></li><li><a href="index.html#contact" data-key="navContact">Contact</a></li><li><button class="lang-toggle" id="langToggle">AR</button></li></ul></nav></div>
            <div class="mobile-menu-toggle"><i class="fas fa-bars"></i></div>
        </div>
        <nav class="mobile-nav" id="mobileNav">
            <ul>
                <li><a href="index.html" data-key="navHome">Home</a></li>
                <li><a href="products.html" data-key="navAllProducts">All Products</a></li>
                <li><a href="index.html#blog" data-key="navBlog">Blog</a></li>
                <li><a href="index.html#contact" data-key="navContact">Contact</a></li>
                <li><button class="lang-toggle" id="langToggleMobile">AR</button></li>
            </ul>
        </nav>
    </header>

    <div class="filter-overlay" id="filter-overlay"></div>

    <main class="page-wrapper">
        <div class="container">
            <div class="intro-text">
                <h1 data-key="introTitle">Exclusive Digital Products, Only at Grinita</h1>
                <p data-key="introDesc">Welcome to the official Grinita store, your exclusive source for high-quality digital goods. Every digital sticker, coloring book, and creative asset you find here is designed with passion by our team. You won't find these unique products anywhere else. Enjoy instant downloads and bring your creative projects to life with our premium, one-of-a-kind designs.</p>
            </div>

            <div class="products-layout">
                <aside class="filters-sidebar" id="filters-sidebar">
                    <div class="sidebar-header"><h3 data-key="filterTitle">Filters</h3><button class="close-filter-btn" id="close-filter-btn">&times;</button></div>
                    <div class="filter-group"><h3>Category</h3><ul><li><label><input type="radio" name="category" value="all" checked><span>All</span></label></li><li><label><input type="radio" name="category" value="stickers"><span>Stickers</span></label></li><li><label><input type="radio" name="category" value="coloring-books"><span>Coloring Books</span></label></li><li><label><input type="radio" name="category" value="ebooks"><span>eBooks</span></label></li></ul></div>
                    <div class="filter-group"><h3>Price Range</h3><div class="price-slider"><div class="price-values"><span id="range1-value">$0</span><span id="range2-value">$50</span></div><div class="slider-container"><div class="slider-track"></div><input type="range" class="range-slider" id="range1" min="0" max="50" value="0"><input type="range" class="range-slider" id="range2" min="0" max="50" value="50"></div></div></div>
                    <div class="filter-group"><h3>Sort By</h3><ul><li><label><input type="radio" name="sort" value="featured" checked><span>Featured</span></label></li><li><label><input type="radio" name="sort" value="newest"><span>Newest</span></label></li><li><label><input type="radio" name="sort" value="most-viewed"><span>Most Viewed</span></label></li></ul></div>
                </aside>

                <div class="products-main">
                    <button class="filter-toggle-btn" id="filter-toggle-btn"><i class="fas fa-filter"></i> Filter Products</button>
                    <div id="products-grid-container" class="products-grid">
                        </div>
                    <div class="mini-blog-section">
                        <img src="https://placehold.co/200x200/FFF9F8/D73F37?text=Grinita" alt="About Grinita Products" class="mini-blog-img">
                        <div class="mini-blog-text"><h3>Crafted with Love</h3><p>Every product is a piece of our heart. We pour hours into creating designs that spark joy and creativity. Thank you for supporting our journey!</p></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer id="footer">
        <div class="container footer-container">
            <a href="index.html" class="footer-logo-link"><img src="images/grinita store stickers and coloring book and t shirt.png" alt="Grinita Logo" class="footer-logo-image"><span class="footer-logo-text">Grinita</span></a>
            <div class="social-links"><a href="https://www.instagram.com/grinitastore/" aria-label="Instagram"><i class="fab fa-instagram"></i></a><a href="#" aria-label="Pinterest"><i class="fab fa-pinterest"></i></a></div>
            <div class="copyright"><p data-key="footerText">&copy; 2025 Grinita. All Rights Reserved.</p></div>
        </div>
    </footer>

    <script src="products-data.js"></script>
<script src="products-data.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    
    // --- كل الدوال المساعدة موجودة هنا ---
    function createRatingStars(rating) { let starsHTML = ''; for (let i = 1; i <= 5; i++) { if (i <= rating) starsHTML += '<i class="fas fa-star"></i>'; else if (i - 0.5 === rating) starsHTML += '<i class="fas fa-star-half-alt"></i>'; else starsHTML += '<i class="far fa-star"></i>'; } return starsHTML; }
    function createImageSlider(images) { return images.map((img, index) => `<img src="${img}" class="${index === 0 ? 'active' : ''}" alt="Product image">`).join(''); }
    function initProductSliders() {
        document.querySelectorAll('.product-card').forEach(card => {
            const slider = card.querySelector('.product-img-slider'); if (!slider) return; const images = slider.querySelectorAll('img'); if (images.length <= 1) { const prev = card.querySelector('.slider-btn.prev'); const next = card.querySelector('.slider-btn.next'); if(prev) prev.style.display = 'none'; if(next) next.style.display = 'none'; return; }
            const prevBtn = card.querySelector('.slider-btn.prev'); const nextBtn = card.querySelector('.slider-btn.next'); let currentIndex = 0;
            function showImage(index) { images.forEach((img, i) => img.classList.toggle('active', i === index)); }
            prevBtn.addEventListener('click', (e) => { e.stopPropagation(); currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1; showImage(currentIndex); });
            nextBtn.addEventListener('click', (e) => { e.stopPropagation(); currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0; showImage(currentIndex); });
        });
    }

    // --- تعريف المتغيرات الرئيسية ---
    const productsGrid = document.getElementById('products-grid-container');
    const range1 = document.getElementById('range1');
    const range2 = document.getElementById('range2');
    const range1Value = document.getElementById('range1-value');
    const range2Value = document.getElementById('range2-value');
    const sliderTrack = document.querySelector('.slider-track');
    
    // --- دالة العرض الرئيسية ---
    function displayProducts(productsToDisplay) {
        productsGrid.innerHTML = '';
        productsToDisplay.forEach(product => {
            const productCardHTML = `
                <div class="product-card">
                    <div class="product-img"><div class="product-img-slider">${createImageSlider(product.images)}</div><button class="slider-btn prev"><i class="fas fa-chevron-left"></i></button><button class="slider-btn next"><i class="fas fa-chevron-right"></i></button></div>
                    <div class="product-content"><h3>${product.title_en}</h3><p>${product.desc_en}</p><div class="product-meta"><div class="product-price">${product.price}</div><div class="product-rating">${createRatingStars(product.rating)}</div></div><a href="${product.buyLink}" class="btn">Buy Now</a></div>
                </div>`;
            productsGrid.innerHTML += productCardHTML;
        });
        initProductSliders();
    }

    // --- ✅ دالة الفلترة الشاملة الجديدة ---
    function filterAndDisplayProducts() {
        if (typeof allProducts === 'undefined') return;

        // 1. احصل على قيم الفلاتر الحالية
        const selectedCategory = document.querySelector('input[name="category"]:checked').value;
        let minPrice = parseInt(range1.value);
        let maxPrice = parseInt(range2.value);
        if (minPrice > maxPrice) [minPrice, maxPrice] = [maxPrice, minPrice]; // التأكد من الترتيب

        // 2. ابدأ بكل المنتجات
        let filteredProducts = allProducts;

        // 3. قم بالفلترة حسب النوع (إذا لم يكن "الكل")
        if (selectedCategory !== 'all') {
            filteredProducts = filteredProducts.filter(product => product.category === selectedCategory);
        }

        // 4. قم بالفلترة حسب السعر
        filteredProducts = filteredProducts.filter(product => {
            const price = parseFloat(product.price.replace('$', '')); // تحويل السعر النصي إلى رقم
            return price >= minPrice && price <= maxPrice;
        });

        // 5. اعرض المنتجات المفلترة
        displayProducts(filteredProducts);
    }

    // --- ربط الأحداث (Event Listeners) ---
    // ربط الفلترة بالنوع
    document.querySelectorAll('input[name="category"]').forEach(radio => {
        radio.addEventListener('change', filterAndDisplayProducts);
    });

    // ربط الفلترة بالسعر (يعمل تلقائيًا عند تحريك الشريط)
    range1.addEventListener('input', filterAndDisplayProducts);
    range2.addEventListener('input', filterAndDisplayProducts);

    // --- كود تحديث شكل شريط السعر (بصريًا) ---
    function updatePriceSliderVisuals() {
        let minVal = parseInt(range1.value); let maxVal = parseInt(range2.value); if (minVal > maxVal) [minVal, maxVal] = [maxVal, minVal];
        sliderTrack.style.left = (minVal / 50) * 100 + '%'; sliderTrack.style.width = ((maxVal - minVal) / 50) * 100 + '%';
        range1Value.textContent = '$' + minVal; range2Value.textContent = '$' + maxVal;
    }
    range1.addEventListener('input', updatePriceSliderVisuals);
    range2.addEventListener('input', updatePriceSliderVisuals);
    updatePriceSliderVisuals(); // للتحديث عند تحميل الصفحة

    // --- تشغيل كل شيء عند تحميل الصفحة ---
    filterAndDisplayProducts(); // عرض المنتجات المفلترة افتراضيًا

    // --- كود الفلترة الجانبية للهاتف ---
    const filterToggleBtn = document.getElementById('filter-toggle-btn');
    const filtersSidebar = document.getElementById('filters-sidebar');
    const closeFilterBtn = document.getElementById('close-filter-btn');
    const filterOverlay = document.getElementById('filter-overlay');
    filterToggleBtn.addEventListener('click', () => { filtersSidebar.classList.add('active'); filterOverlay.style.display = 'block'; });
    closeFilterBtn.addEventListener('click', () => { filtersSidebar.classList.remove('active'); filterOverlay.style.display = 'none'; });
    filterOverlay.addEventListener('click', () => { filtersSidebar.classList.remove('active'); filterOverlay.style.display = 'none'; });

    // --- كود قائمة الهاتف ---
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileNav = document.getElementById('mobileNav');
    if (mobileMenuToggle) {
        mobileMenuToggle.addEventListener('click', () => mobileNav.classList.toggle('active'));
    }
    
    // ... بقية أكواد الجافاسكريبت الأصلية للترجمة، إلخ ...
});
</script>
</body>
</html>
